# ─── Cloudflare Tunnel Config ───────────────────────────────────────
# Place this at ~/.cloudflared/config.yml on your CasaOS server
# Replace <TUNNEL_ID> and <yourdomain.com> with your actual values
#
# Setup steps:
#   1. cloudflared tunnel login
#   2. cloudflared tunnel create nightcity
#   3. cloudflared tunnel route dns nightcity voice.yourdomain.com
#   4. Copy this file to ~/.cloudflared/config.yml
#   5. cloudflared tunnel run nightcity
# ────────────────────────────────────────────────────────────────────

tunnel: nightcity
credentials-file: /root/.cloudflared/<TUNNEL_ID>.json

ingress:
  # Everything goes to the Express server (which serves both API + built React app)
  - hostname: voice.yourdomain.com
    service: http://localhost:3001
    originRequest:
      noTLSVerify: true
      # WebSocket support for Socket.IO
      connectTimeout: 10s
      keepAliveTimeout: 90s

  # Catch-all required by cloudflared
  - service: http_status:404
